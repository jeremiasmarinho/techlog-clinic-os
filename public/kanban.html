<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanban de Pacientes | Medical CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/css/themes.css">
    <link rel="stylesheet" href="./kanban.css">
    <script src="./dist/theme-manager.js"></script>
</head>
<body class="min-h-screen bg-slate-900 text-white" data-hide-clinic-header="true">
    <div class="max-w-7xl mx-auto px-6 py-8">
        <header class="mb-8">
            <h1 class="text-3xl font-bold">Kanban de Pacientes</h1>
            <p class="text-slate-300">Arraste, organize e acompanhe o fluxo de atendimento</p>
        </header>

        <section class="kanban-scroll">
            <div class="kanban-grid">
                <!-- Column: Aguardando -->
                <div class="kanban-column" data-status="waiting">
                    <div class="kanban-column-header">
                        <h2 class="text-lg font-semibold">Aguardando</h2>
                        <span class="kanban-count">5</span>
                    </div>
                    <div class="kanban-cards">
                        <div class="kanban-card" draggable="true" data-patient-id="101">
                            <div class="kanban-card-header">
                                <div class="avatar">AB</div>
                                <div>
                                    <p class="font-semibold">Ana Beatriz</p>
                                    <p class="text-sm text-slate-200">09:00</p>
                                </div>
                            </div>
                            <div class="kanban-card-footer">
                                <span class="kanban-tag tag-blue">Conv√™nio</span>
                                <span class="text-xs text-slate-200">Unimed</span>
                            </div>
                        </div>
                        <div class="kanban-card" draggable="true" data-patient-id="102">
                            <div class="kanban-card-header">
                                <div class="avatar">RV</div>
                                <div>
                                    <p class="font-semibold">Rafael Vieira</p>
                                    <p class="text-sm text-slate-200">09:30</p>
                                </div>
                            </div>
                            <div class="kanban-card-footer">
                                <span class="kanban-tag tag-emerald">Particular</span>
                                <span class="text-xs text-slate-200">R$ 280,00</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column: Triagem -->
                <div class="kanban-column" data-status="triage">
                    <div class="kanban-column-header">
                        <h2 class="text-lg font-semibold">Triagem</h2>
                        <span class="kanban-count">3</span>
                    </div>
                    <div class="kanban-cards">
                        <div class="kanban-card" draggable="true" data-patient-id="201">
                            <div class="kanban-card-header">
                                <div class="avatar">LP</div>
                                <div>
                                    <p class="font-semibold">Lucas Prado</p>
                                    <p class="text-sm text-slate-200">10:10</p>
                                </div>
                            </div>
                            <div class="kanban-card-footer">
                                <span class="kanban-tag tag-purple">Retorno</span>
                                <span class="text-xs text-slate-200">Check-up</span>
                            </div>
                        </div>
                        <div class="kanban-card" draggable="true" data-patient-id="202">
                            <div class="kanban-card-header">
                                <div class="avatar">CS</div>
                                <div>
                                    <p class="font-semibold">Camila Souza</p>
                                    <p class="text-sm text-slate-200">10:30</p>
                                </div>
                            </div>
                            <div class="kanban-card-footer">
                                <span class="kanban-tag tag-blue">Conv√™nio</span>
                                <span class="text-xs text-slate-200">Bradesco</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column: Em Consulta -->
                <div class="kanban-column" data-status="consultation">
                    <div class="kanban-column-header">
                        <h2 class="text-lg font-semibold">Em Consulta</h2>
                        <span class="kanban-count">2</span>
                    </div>
                    <div class="kanban-cards">
                        <div class="kanban-card" draggable="true" data-patient-id="301">
                            <div class="kanban-card-header">
                                <div class="avatar">MS</div>
                                <div>
                                    <p class="font-semibold">Mariana Silva</p>
                                    <p class="text-sm text-slate-200">11:00</p>
                                </div>
                            </div>
                            <div class="kanban-card-footer">
                                <span class="kanban-tag tag-emerald">Particular</span>
                                <span class="text-xs text-slate-200">R$ 320,00</span>
                            </div>
                        </div>
                        <div class="kanban-card" draggable="true" data-patient-id="302">
                            <div class="kanban-card-header">
                                <div class="avatar">JG</div>
                                <div>
                                    <p class="font-semibold">Jo√£o Gomes</p>
                                    <p class="text-sm text-slate-200">11:20</p>
                                </div>
                            </div>
                            <div class="kanban-card-footer">
                                <span class="kanban-tag tag-blue">Conv√™nio</span>
                                <span class="text-xs text-slate-200">SulAm√©rica</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Column: Finalizado -->
                <div class="kanban-column" data-status="finished">
                    <div class="kanban-column-header">
                        <h2 class="text-lg font-semibold">Finalizado</h2>
                        <span class="kanban-count">4</span>
                    </div>
                    <div class="kanban-cards">
                        <div class="kanban-card" draggable="true" data-patient-id="401">
                            <div class="kanban-card-header">
                                <div class="avatar">PF</div>
                                <div>
                                    <p class="font-semibold">Paulo Freitas</p>
                                    <p class="text-sm text-slate-200">08:40</p>
                                </div>
                            </div>
                            <div class="kanban-card-footer">
                                <span class="kanban-tag tag-purple">Retorno</span>
                                <span class="text-xs text-slate-200">Ortopedia</span>
                            </div>
                        </div>
                        <div class="kanban-card" draggable="true" data-patient-id="402">
                            <div class="kanban-card-header">
                                <div class="avatar">NL</div>
                                <div>
                                    <p class="font-semibold">Nat√°lia Lima</p>
                                    <p class="text-sm text-slate-200">09:15</p>
                                </div>
                            </div>
                            <div class="kanban-card-footer">
                                <span class="kanban-tag tag-emerald">Particular</span>
                                <span class="text-xs text-slate-200">R$ 250,00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <script src="/shared/constants/statuses.js"></script>    <script src=\"./dist/components/confirm-modal.js\"></script>
    <script src=\"./dist/components/toast.js\"></script>    <script src=\"./dist/utils/avatar-colors.js\"></script>    <script src="./dist/services/appointments-service.js"></script>
    <script src="./dist/kanban.js"></script>

    <!-- Medical Modal (Atendimento) -->
    <div id="attendanceModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden items-center justify-center z-50">
        <div class="bg-white/10 border border-white/20 backdrop-blur-xl rounded-2xl p-6 w-full max-w-2xl text-white">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-xl font-semibold">Finalizar Atendimento</h3>
                <button type="button" onclick="document.getElementById('attendanceModal').classList.add('hidden')" class="text-white/70 hover:text-white">‚úï</button>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="text-sm text-slate-200">Anamnese</label>
                    <textarea id="anamnesisText" class="w-full mt-2 p-3 rounded-xl bg-white/10 border border-white/20" rows="4" placeholder="Descreva a anamnese..."></textarea>
                </div>
                <div>
                    <label class="text-sm text-slate-200">Diagn√≥stico</label>
                    <input id="diagnosisText" class="w-full mt-2 p-3 rounded-xl bg-white/10 border border-white/20" placeholder="Diagn√≥stico principal" />
                </div>
                <div>
                    <label class="text-sm text-slate-200">Medicamentos</label>
                    <ul id="medicationsList" class="mt-2 space-y-2">
                        <li class="medication-item">Paracetamol 500mg - 1 comprimido a cada 8h</li>
                    </ul>
                </div>
            </div>

            <div class="mt-6 flex items-center justify-between">
                <button
                    id="prescriptionDownloadBtn"
                    class="px-4 py-2 rounded-xl border border-white/20 bg-white/10 hover:bg-white/20 transition flex items-center gap-2"
                    disabled
                >
                    <span>üñ®Ô∏è</span>
                    Imprimir Receita
                </button>
                <button
                    id="attendanceSubmitBtn"
                    onclick="submitAttendance(window.currentPatientId)"
                    class="px-5 py-2 rounded-xl bg-cyan-500 hover:bg-cyan-600 transition text-white font-semibold"
                >
                    Salvar Atendimento
                </button>
            </div>
        </div>
    </div>
</body>
</html>
