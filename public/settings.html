<!DOCTYPE html>
<html lang="pt-BR" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configurações - Medical CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/css/themes.css">
    <style>
        /* Dark mode background */
        [data-theme="dark"] body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #0f766e 100%);
        }
        /* Light mode background */
        [data-theme="light"] body {
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 50%, #ccfbf1 100%);
        }
        body { min-height: 100vh; }
        
        /* Dark glass card */
        [data-theme="dark"] .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Light glass card */
        [data-theme="light"] .glass-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(148, 163, 184, 0.3);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        /* Light mode text overrides */
        [data-theme="light"] .text-white { color: #0f172a !important; }
        [data-theme="light"] .text-slate-300 { color: #475569 !important; }
        [data-theme="light"] .text-slate-400 { color: #64748b !important; }
        [data-theme="light"] .text-cyan-400 { color: #0891b2 !important; }
        [data-theme="light"] .bg-slate-800 { background: #f1f5f9 !important; }
        [data-theme="light"] .bg-slate-900 { background: #f8fafc !important; }
        [data-theme="light"] .border-slate-700 { border-color: #e2e8f0 !important; }
        [data-theme="light"] .border-slate-600 { border-color: #cbd5e1 !important; }
        .tab-button {
            position: relative;
            transition: all 0.3s ease;
        }
        .tab-button.active {
            color: #06b6d4;
        }
        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #06b6d4, #0891b2);
            border-radius: 2px 2px 0 0;
        }
        .badge-admin {
            background: linear-gradient(135deg, #a855f7, #9333ea);
        }
        .badge-staff {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }
        .user-row {
            transition: all 0.2s ease;
        }
        .user-row:hover {
            background: rgba(6, 182, 212, 0.1);
            transform: translateX(4px);
        }
        
        /* Sidebar Styles */
        #sidebar {
            width: 5rem; /* Collapsed by default */
        }
        
        #sidebar.expanded {
            width: 16rem; /* Expanded width */
        }
        
        #sidebar.expanded .sidebar-text,
        #sidebar.expanded .sidebar-item span {
            opacity: 1;
            transform: translateX(0);
        }
        
        #mainContent {
            margin-left: 5rem;
            transition: margin-left 0.3s ease;
        }
        
        #mainContent.expanded {
            margin-left: 16rem;
        }
        
        .sidebar-text {
            opacity: 0;
            transform: translateX(-10px);
            transition: all 0.3s ease;
        }
        
        #sidebar.expanded .sidebar-text {
            opacity: 1;
            transform: translateX(0);
        }
        
        .sidebar-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            color: #cbd5e1;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            background: transparent;
            width: 100%;
            text-align: left;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .sidebar-item:hover {
            background: rgba(6, 182, 212, 0.15);
            color: #06b6d4;
            transform: translateX(2px);
        }
        
        .sidebar-item i {
            width: 1.25rem;
            font-size: 1.125rem;
            text-align: center;
            flex-shrink: 0;
            transition: transform 0.3s ease;
        }
        
        .sidebar-item:hover i {
            transform: scale(1.1);
        }
        
        .sidebar-item span {
            opacity: 0;
            transform: translateX(-10px);
            transition: all 0.3s ease;
        }
        
        #sidebar.expanded .sidebar-item span {
            opacity: 1;
            transform: translateX(0);
        }
        
        #sidebar.expanded #toggleIcon {
            transform: rotate(180deg);
        }
        
        #toggleIcon {
            transition: transform 0.3s ease;
        }
        
        #sidebarOverlay {
            display: none;
        }
        
        @media (max-width: 768px) {
            #sidebar {
                transform: translateX(-100%);
            }
            
            #sidebar.open {
                transform: translateX(0);
                width: 16rem;
            }
            
            #sidebar.open .sidebar-text,
            #sidebar.open .sidebar-item span {
                opacity: 1;
                transform: translateX(0);
            }
            
            #sidebarOverlay.show {
                display: block;
            }
            
            #mainContent {
                margin-left: 0;
            }
        }
    </style>
    <script src="./js/theme-manager.js"></script>
    <script src="./js/components/sidebar.js"></script>
    <script src="./js/components/clinic-header.js"></script>
    <script src="./js/services/clinic-service.js"></script>
</head>
<body class="min-h-screen flex flex-col" data-hide-clinic-header="true">

    <!-- Multi-Tenant Clinic Header (injected automatically) -->

    <div class="flex flex-1">

    <!-- Sidebar Component -->
    <medical-sidebar active="settings"></medical-sidebar>

    <!-- Main Content -->
    <main id="mainContent" class="flex-1 transition-all duration-300 p-8">
        
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-4xl font-bold text-white mb-2 flex items-center">
                <i class="fas fa-cog mr-4 text-cyan-400"></i>
                Configurações da Clínica
            </h1>
            <p class="text-gray-400">Gerencie sua equipe e configurações</p>
        </div>

        <!-- Tabs -->
        <div class="flex items-center space-x-6 mb-6 border-b border-white/10 pb-3">
            <button 
                id="tabEquipe" 
                class="tab-button active text-lg font-semibold px-4 py-2"
                onclick="switchTab('equipe')"
            >
                <i class="fas fa-users mr-2"></i>
                Equipe
            </button>
            <button 
                id="tabPerfil" 
                class="tab-button text-lg font-semibold px-4 py-2 text-gray-400"
                onclick="switchTab('perfil')"
            >
                <i class="fas fa-hospital mr-2"></i>
                Perfil da Clínica
            </button>
            <button 
                id="tabPlano" 
                class="tab-button text-lg font-semibold px-4 py-2 text-gray-400"
                onclick="switchTab('plano')"
            >
                <i class="fas fa-crown mr-2"></i>
                Plano & Limites
            </button>
        </div>

        <!-- Tab Content: Equipe -->
        <div id="contentEquipe" class="tab-content">
            
            <!-- Action Bar -->
            <div class="flex justify-between items-center mb-6">
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <i class="fas fa-search absolute left-4 top-3.5 text-cyan-400"></i>
                        <input 
                            type="text" 
                            id="searchUser" 
                            placeholder="Buscar por nome ou email..."
                            class="w-80 pl-12 pr-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                            oninput="filterUsers()"
                        >
                    </div>
                </div>
                <button 
                    onclick="openNewUserModal()" 
                    class="bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-bold px-6 py-3 rounded-lg shadow-lg transition flex items-center"
                >
                    <i class="fas fa-user-plus mr-2"></i>
                    Nova Secretária
                </button>
            </div>

            <!-- Users Table -->
            <div class="glass-card rounded-xl overflow-hidden">
                <table class="w-full">
                    <thead class="bg-white/5">
                        <tr>
                            <th class="px-6 py-4 text-left text-xs font-bold text-cyan-400 uppercase tracking-wider">
                                <i class="fas fa-user mr-2"></i>Usuário
                            </th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-cyan-400 uppercase tracking-wider">
                                <i class="fas fa-envelope mr-2"></i>Email (Login)
                            </th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-cyan-400 uppercase tracking-wider">
                                <i class="fas fa-shield-alt mr-2"></i>Função
                            </th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-cyan-400 uppercase tracking-wider">
                                <i class="fas fa-toggle-on mr-2"></i>Status
                            </th>
                            <th class="px-6 py-4 text-right text-xs font-bold text-cyan-400 uppercase tracking-wider">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="usersTableBody" class="divide-y divide-white/5">
                        <!-- Rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="hidden text-center py-16">
                <i class="fas fa-users-slash text-6xl text-gray-600 mb-4"></i>
                <p class="text-xl text-gray-400 mb-2">Nenhum usuário encontrado</p>
                <p class="text-gray-500">Comece adicionando uma secretária</p>
            </div>

        </div>

        <!-- Tab Content: Perfil -->
        <div id="contentPerfil" class="tab-content hidden">
            
            <!-- Action Bar -->
            <div class="flex justify-end items-center mb-6">
                <button 
                    onclick="saveClinicSettings()" 
                    id="saveSettingsBtn"
                    class="bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-bold px-6 py-3 rounded-lg shadow-lg transition flex items-center"
                >
                    <i class="fas fa-save mr-2"></i>
                    Salvar Alterações
                </button>
            </div>

            <!-- Grid Layout -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                
                <!-- CARD 1: Identidade & Operacional -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-hospital text-cyan-400 mr-3"></i>
                        Identidade & Operacional
                    </h3>
                    
                    <!-- Logo Upload -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-image mr-2"></i>Logo da Clínica
                        </label>
                        <div class="flex items-center space-x-4">
                            <div id="logoPreview" class="w-24 h-24 bg-white/10 border-2 border-white/20 rounded-lg flex items-center justify-center overflow-hidden">
                                <i class="fas fa-hospital text-4xl text-gray-400" id="logoIcon"></i>
                                <img id="logoImage" class="w-full h-full object-cover hidden" alt="Logo">
                            </div>
                            <div class="flex-1">
                                <input 
                                    type="file" 
                                    id="logoInput" 
                                    accept="image/png,image/jpeg,image/jpg,image/gif"
                                    class="hidden"
                                    onchange="handleLogoUpload(event)"
                                >
                                <button 
                                    type="button"
                                    onclick="document.getElementById('logoInput').click()"
                                    class="bg-white/10 hover:bg-white/20 text-white px-4 py-2 rounded-lg transition text-sm font-semibold"
                                >
                                    <i class="fas fa-upload mr-2"></i>Selecionar Imagem
                                </button>
                                <p class="text-xs text-gray-400 mt-2">PNG, JPG até 2MB</p>
                            </div>
                        </div>
                    </div>

                    <!-- Clinic Name -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-hospital-alt mr-2"></i>Nome Exibido da Clínica
                        </label>
                        <input 
                            type="text" 
                            id="clinicName" 
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                            placeholder="Ex: Clínica Viva Saúde"
                        >
                    </div>

                    <!-- Phone -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-phone mr-2"></i>Telefone Oficial / WhatsApp
                        </label>
                        <input 
                            type="tel" 
                            id="clinicPhone" 
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                            placeholder="(11) 99999-9999"
                            maxlength="15"
                        >
                    </div>

                    <!-- Address -->
                    <div>
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-map-marker-alt mr-2"></i>Endereço Completo
                        </label>
                        <textarea 
                            id="clinicAddress" 
                            rows="3"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400 resize-none"
                            placeholder="Rua, Número, Bairro, Cidade - Estado, CEP"
                        ></textarea>
                    </div>
                </div>

                <!-- CARD 2: Horários de Atendimento -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-clock text-cyan-400 mr-3"></i>
                        Horários de Atendimento
                    </h3>

                    <!-- Opening/Closing Hours -->
                    <div class="grid grid-cols-2 gap-4 mb-5">
                        <div>
                            <label class="block text-sm font-semibold text-cyan-300 mb-2">
                                <i class="fas fa-sun mr-2"></i>Abertura
                            </label>
                            <input 
                                type="time" 
                                id="openingHour" 
                                class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                                value="08:00"
                            >
                        </div>
                        <div>
                            <label class="block text-sm font-semibold text-cyan-300 mb-2">
                                <i class="fas fa-moon mr-2"></i>Fechamento
                            </label>
                            <input 
                                type="time" 
                                id="closingHour" 
                                class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                                value="18:00"
                            >
                        </div>
                    </div>

                    <!-- Working Days -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-3">
                            <i class="fas fa-calendar-week mr-2"></i>Dias de Funcionamento
                        </label>
                        <div class="grid grid-cols-4 gap-2">
                            <label class="flex items-center p-3 bg-white/5 hover:bg-white/10 rounded-lg cursor-pointer border border-white/10 transition">
                                <input type="checkbox" id="daySeg" checked class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2">
                                <span class="ml-2 text-white text-sm font-medium">Seg</span>
                            </label>
                            <label class="flex items-center p-3 bg-white/5 hover:bg-white/10 rounded-lg cursor-pointer border border-white/10 transition">
                                <input type="checkbox" id="dayTer" checked class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2">
                                <span class="ml-2 text-white text-sm font-medium">Ter</span>
                            </label>
                            <label class="flex items-center p-3 bg-white/5 hover:bg-white/10 rounded-lg cursor-pointer border border-white/10 transition">
                                <input type="checkbox" id="dayQua" checked class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2">
                                <span class="ml-2 text-white text-sm font-medium">Qua</span>
                            </label>
                            <label class="flex items-center p-3 bg-white/5 hover:bg-white/10 rounded-lg cursor-pointer border border-white/10 transition">
                                <input type="checkbox" id="dayQui" checked class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2">
                                <span class="ml-2 text-white text-sm font-medium">Qui</span>
                            </label>
                            <label class="flex items-center p-3 bg-white/5 hover:bg-white/10 rounded-lg cursor-pointer border border-white/10 transition">
                                <input type="checkbox" id="daySex" checked class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2">
                                <span class="ml-2 text-white text-sm font-medium">Sex</span>
                            </label>
                            <label class="flex items-center p-3 bg-white/5 hover:bg-white/10 rounded-lg cursor-pointer border border-white/10 transition">
                                <input type="checkbox" id="daySab" class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2">
                                <span class="ml-2 text-white text-sm font-medium">Sáb</span>
                            </label>
                            <label class="flex items-center p-3 bg-white/5 hover:bg-white/10 rounded-lg cursor-pointer border border-white/10 transition">
                                <input type="checkbox" id="dayDom" class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2">
                                <span class="ml-2 text-white text-sm font-medium">Dom</span>
                            </label>
                        </div>
                    </div>

                    <!-- Lunch Break -->
                    <div>
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-utensils mr-2"></i>Intervalo de Almoço (Opcional)
                        </label>
                        <div class="grid grid-cols-2 gap-4">
                            <input 
                                type="time" 
                                id="lunchStart" 
                                class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                                placeholder="Início"
                            >
                            <input 
                                type="time" 
                                id="lunchEnd" 
                                class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                                placeholder="Fim"
                            >
                        </div>
                        <p class="text-xs text-gray-400 mt-2">Deixe em branco se não houver intervalo</p>
                    </div>
                </div>

                <!-- CARD 3: Financeiro & Convênios -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-money-check-alt text-cyan-400 mr-3"></i>
                        Convênios & Planos de Saúde
                    </h3>

                    <p class="text-sm text-gray-400 mb-4">
                        Gerencie os planos aceitos pela clínica. Estes aparecerão como opções no sistema.
                    </p>

                    <!-- Add Insurance Input -->
                    <div class="flex space-x-2 mb-4">
                        <input 
                            type="text" 
                            id="newInsuranceInput" 
                            class="flex-1 px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                            placeholder="Ex: Unimed, Bradesco Saúde..."
                            onkeypress="if(event.key==='Enter') addInsurance()"
                        >
                        <button 
                            onclick="addInsurance()"
                            class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold px-6 py-3 rounded-lg transition"
                        >
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>

                    <!-- Insurance Tags List -->
                    <div class="bg-white/5 border border-white/10 rounded-lg p-4 min-h-[200px]">
                        <div id="insuranceTagsList" class="flex flex-wrap gap-2">
                            <!-- Tags will be rendered here -->
                            <div class="text-gray-400 text-sm w-full text-center py-8">
                                <i class="fas fa-tags text-3xl mb-2 block"></i>
                                Nenhum convênio cadastrado ainda
                            </div>
                        </div>
                    </div>

                    <!-- Default Plans Info -->
                    <div class="bg-blue-500/10 border border-blue-500/30 rounded-lg p-3 mt-4">
                        <p class="text-xs text-blue-300 flex items-start">
                            <i class="fas fa-info-circle mr-2 mt-0.5"></i>
                            <span>Sugestão: Adicione "Particular" para atendimentos sem convênio.</span>
                        </p>
                    </div>
                </div>

                <!-- CARD 4: Inteligência do Chat (Scripts) -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-robot text-cyan-400 mr-3"></i>
                        Inteligência do Chat (Scripts)
                    </h3>

                    <p class="text-sm text-gray-400 mb-4">
                        Personalize as mensagens automáticas do chatbot da clínica.
                    </p>

                    <!-- Greeting Message -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-comment-dots mr-2"></i>Mensagem de Saudação
                        </label>
                        <textarea 
                            id="chatGreeting" 
                            rows="3"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400 resize-none"
                            placeholder="Ex: Olá! Sou a assistente virtual da Clínica Viva. Como posso ajudá-lo hoje?"
                        ></textarea>
                        <p class="text-xs text-gray-400 mt-1">Primeira mensagem que o paciente vê ao abrir o chat</p>
                    </div>

                    <!-- Away Message -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-moon mr-2"></i>Mensagem de Ausência
                        </label>
                        <textarea 
                            id="chatAwayMessage" 
                            rows="3"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400 resize-none"
                            placeholder="Ex: Estamos fechados no momento. Nosso horário de atendimento é de segunda a sexta, das 8h às 18h."
                        ></textarea>
                        <p class="text-xs text-gray-400 mt-1">Exibida quando a clínica está fechada</p>
                    </div>

                    <!-- Appointment Instructions -->
                    <div>
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-clipboard-list mr-2"></i>Instruções de Agendamento
                        </label>
                        <textarea 
                            id="chatInstructions" 
                            rows="4"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400 resize-none"
                            placeholder="Ex: Para agendar sua consulta, preciso que informe: especialidade desejada, forma de pagamento (plano ou particular), período de preferência e seus dados de contato."
                        ></textarea>
                        <p class="text-xs text-gray-400 mt-1">Orientações para guiar o paciente no agendamento</p>
                    </div>
                </div>

                <!-- CARD 5: Configurações de Agendamento -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-calendar-check text-cyan-400 mr-3"></i>
                        Configurações de Agendamento
                    </h3>

                    <!-- Duração Padrão da Consulta -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-hourglass-half mr-2"></i>Duração Padrão da Consulta
                        </label>
                        <select 
                            id="defaultDuration"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                        >
                            <option value="15" class="bg-slate-900">15 minutos</option>
                            <option value="20" class="bg-slate-900">20 minutos</option>
                            <option value="30" class="bg-slate-900" selected>30 minutos</option>
                            <option value="45" class="bg-slate-900">45 minutos</option>
                            <option value="60" class="bg-slate-900">1 hora</option>
                            <option value="90" class="bg-slate-900">1h30min</option>
                        </select>
                    </div>

                    <!-- Intervalo entre Consultas -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-pause-circle mr-2"></i>Intervalo entre Consultas
                        </label>
                        <select 
                            id="appointmentInterval"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                        >
                            <option value="0" class="bg-slate-900">Sem intervalo</option>
                            <option value="5" class="bg-slate-900">5 minutos</option>
                            <option value="10" class="bg-slate-900" selected>10 minutos</option>
                            <option value="15" class="bg-slate-900">15 minutos</option>
                            <option value="30" class="bg-slate-900">30 minutos</option>
                        </select>
                        <p class="text-xs text-gray-400 mt-1">Tempo para limpeza/preparação da sala</p>
                    </div>

                    <!-- Antecedência Mínima -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-clock mr-2"></i>Antecedência Mínima para Agendar
                        </label>
                        <select 
                            id="minAdvance"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                        >
                            <option value="0" class="bg-slate-900">Sem restrição</option>
                            <option value="1" class="bg-slate-900">1 hora antes</option>
                            <option value="2" class="bg-slate-900" selected>2 horas antes</option>
                            <option value="4" class="bg-slate-900">4 horas antes</option>
                            <option value="24" class="bg-slate-900">1 dia antes</option>
                            <option value="48" class="bg-slate-900">2 dias antes</option>
                        </select>
                        <p class="text-xs text-gray-400 mt-1">Evita agendamentos de última hora</p>
                    </div>

                    <!-- Antecedência Máxima -->
                    <div>
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-calendar-alt mr-2"></i>Antecedência Máxima para Agendar
                        </label>
                        <select 
                            id="maxAdvance"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                        >
                            <option value="7" class="bg-slate-900">7 dias</option>
                            <option value="15" class="bg-slate-900">15 dias</option>
                            <option value="30" class="bg-slate-900" selected>30 dias</option>
                            <option value="60" class="bg-slate-900">60 dias</option>
                            <option value="90" class="bg-slate-900">90 dias</option>
                            <option value="180" class="bg-slate-900">6 meses</option>
                        </select>
                        <p class="text-xs text-gray-400 mt-1">Limita agendamentos muito distantes</p>
                    </div>
                </div>

                <!-- CARD 6: Tabela de Valores -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-dollar-sign text-green-400 mr-3"></i>
                        Tabela de Valores (Particular)
                    </h3>

                    <p class="text-sm text-gray-400 mb-4">
                        Defina os valores padrão para cada tipo de consulta particular.
                    </p>

                    <!-- Primeira Consulta -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-star mr-2"></i>Primeira Consulta
                        </label>
                        <div class="relative">
                            <span class="absolute left-4 top-3.5 text-gray-400">R$</span>
                            <input 
                                type="number" 
                                id="priceFirstConsult"
                                step="0.01"
                                class="w-full pl-12 pr-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                                placeholder="200,00"
                            >
                        </div>
                    </div>

                    <!-- Retorno -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-redo mr-2"></i>Retorno
                        </label>
                        <div class="relative">
                            <span class="absolute left-4 top-3.5 text-gray-400">R$</span>
                            <input 
                                type="number" 
                                id="priceReturn"
                                step="0.01"
                                class="w-full pl-12 pr-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                                placeholder="150,00"
                            >
                        </div>
                    </div>

                    <!-- Exame -->
                    <div class="mb-4">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-vial mr-2"></i>Exame / Procedimento
                        </label>
                        <div class="relative">
                            <span class="absolute left-4 top-3.5 text-gray-400">R$</span>
                            <input 
                                type="number" 
                                id="priceExam"
                                step="0.01"
                                class="w-full pl-12 pr-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                                placeholder="100,00"
                            >
                        </div>
                    </div>

                    <!-- Retorno Gratuito -->
                    <div class="bg-blue-500/10 border border-blue-500/30 rounded-lg p-3">
                        <label class="flex items-center cursor-pointer">
                            <input 
                                type="checkbox" 
                                id="freeReturn" 
                                class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2"
                            >
                            <span class="ml-3 text-blue-200 text-sm">
                                <i class="fas fa-gift mr-2"></i>
                                Retorno gratuito dentro de 7 dias
                            </span>
                        </label>
                    </div>
                </div>

                <!-- CARD 7: Notificações WhatsApp -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fab fa-whatsapp text-green-400 mr-3"></i>
                        Notificações por WhatsApp
                    </h3>

                    <p class="text-sm text-gray-400 mb-4">
                        Configure lembretes automáticos para os pacientes.
                    </p>

                    <!-- Lembrete de Consulta -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-bell mr-2"></i>Lembrete Antes da Consulta
                        </label>
                        <select 
                            id="reminderHours"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                        >
                            <option value="0" class="bg-slate-900">Desativado</option>
                            <option value="1" class="bg-slate-900">1 hora antes</option>
                            <option value="2" class="bg-slate-900">2 horas antes</option>
                            <option value="4" class="bg-slate-900">4 horas antes</option>
                            <option value="24" class="bg-slate-900" selected>1 dia antes</option>
                            <option value="48" class="bg-slate-900">2 dias antes</option>
                        </select>
                    </div>

                    <!-- Confirmação de Consulta -->
                    <div class="mb-5">
                        <label class="flex items-center cursor-pointer p-3 bg-white/5 hover:bg-white/10 rounded-lg border border-white/10 transition">
                            <input 
                                type="checkbox" 
                                id="confirmationEnabled" 
                                checked
                                class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2"
                            >
                            <span class="ml-3 text-white text-sm font-medium">
                                <i class="fas fa-check-double text-green-400 mr-2"></i>
                                Pedir confirmação de presença
                            </span>
                        </label>
                        <p class="text-xs text-gray-400 mt-1">Paciente recebe link para confirmar ou cancelar</p>
                    </div>

                    <!-- Mensagem de Lembrete -->
                    <div>
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-comment-dots mr-2"></i>Modelo da Mensagem
                        </label>
                        <textarea 
                            id="reminderMessage"
                            rows="3"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400 resize-none"
                            placeholder="Olá {nome}! Lembramos que você tem consulta amanhã às {hora} na {clinica}. Confirme sua presença!"
                        ></textarea>
                        <p class="text-xs text-gray-400 mt-1">Use: {nome}, {data}, {hora}, {medico}, {clinica}</p>
                    </div>
                </div>

                <!-- CARD 8: Especialidades -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-stethoscope text-purple-400 mr-3"></i>
                        Especialidades da Clínica
                    </h3>

                    <p class="text-sm text-gray-400 mb-4">
                        Liste as especialidades médicas oferecidas pela clínica.
                    </p>

                    <!-- Add Specialty Input -->
                    <div class="flex space-x-2 mb-4">
                        <input 
                            type="text" 
                            id="newSpecialtyInput" 
                            class="flex-1 px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                            placeholder="Ex: Cardiologia, Dermatologia..."
                            onkeypress="if(event.key==='Enter') addSpecialty()"
                        >
                        <button 
                            onclick="addSpecialty()"
                            class="bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 text-white font-bold px-6 py-3 rounded-lg transition"
                        >
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>

                    <!-- Specialties Tags List -->
                    <div class="bg-white/5 border border-white/10 rounded-lg p-4 min-h-[120px]">
                        <div id="specialtiesTagsList" class="flex flex-wrap gap-2">
                            <div class="text-gray-400 text-sm w-full text-center py-4">
                                <i class="fas fa-user-md text-2xl mb-2 block"></i>
                                Nenhuma especialidade cadastrada
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CARD 9: Documentos / Receituário -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-file-medical text-red-400 mr-3"></i>
                        Configuração de Receituário
                    </h3>

                    <p class="text-sm text-gray-400 mb-4">
                        Personalize o cabeçalho e rodapé das receitas e documentos.
                    </p>

                    <!-- Cabeçalho -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-heading mr-2"></i>Cabeçalho do Documento
                        </label>
                        <textarea 
                            id="documentHeader"
                            rows="3"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400 resize-none"
                            placeholder="Nome da Clínica&#10;Especialidade Médica&#10;CNPJ: 00.000.000/0001-00"
                        ></textarea>
                    </div>

                    <!-- Rodapé -->
                    <div>
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-shoe-prints mr-2"></i>Rodapé do Documento
                        </label>
                        <textarea 
                            id="documentFooter"
                            rows="2"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400 resize-none"
                            placeholder="Rua Exemplo, 123 - Centro | Tel: (11) 9999-9999 | email@clinica.com"
                        ></textarea>
                    </div>
                </div>

                <!-- CARD 10: Segurança -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4 flex items-center">
                        <i class="fas fa-shield-alt text-amber-400 mr-3"></i>
                        Segurança
                    </h3>

                    <!-- Tempo de Sessão -->
                    <div class="mb-5">
                        <label class="block text-sm font-semibold text-cyan-300 mb-2">
                            <i class="fas fa-stopwatch mr-2"></i>Tempo de Sessão
                        </label>
                        <select 
                            id="sessionTimeout"
                            class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white"
                        >
                            <option value="30" class="bg-slate-900">30 minutos</option>
                            <option value="60" class="bg-slate-900">1 hora</option>
                            <option value="120" class="bg-slate-900" selected>2 horas</option>
                            <option value="240" class="bg-slate-900">4 horas</option>
                            <option value="480" class="bg-slate-900">8 horas (dia inteiro)</option>
                        </select>
                        <p class="text-xs text-gray-400 mt-1">Logout automático após inatividade</p>
                    </div>

                    <!-- Múltiplos Logins -->
                    <div>
                        <label class="flex items-center cursor-pointer p-3 bg-white/5 hover:bg-white/10 rounded-lg border border-white/10 transition">
                            <input 
                                type="checkbox" 
                                id="allowMultipleLogins" 
                                checked
                                class="w-4 h-4 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2"
                            >
                            <span class="ml-3 text-white text-sm font-medium">
                                <i class="fas fa-laptop text-cyan-400 mr-2"></i>
                                Permitir login em múltiplos dispositivos
                            </span>
                        </label>
                        <p class="text-xs text-gray-400 mt-1">Desativado: apenas um dispositivo por vez</p>
                    </div>
                </div>

            </div>

            <!-- Floating Save Button (Mobile) -->
            <button 
                onclick="saveClinicSettings()" 
                class="fixed bottom-6 right-6 md:hidden bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-bold w-14 h-14 rounded-full shadow-2xl flex items-center justify-center z-40"
                title="Salvar Alterações"
            >
                <i class="fas fa-save text-xl"></i>
            </button>

        </div>

        <!-- Tab Content: Plano & Limites -->
        <div id="contentPlano" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Plano Atual -->
                <div class="glass-card rounded-xl p-6">
                    <div class="flex items-start justify-between mb-4">
                        <h3 class="text-xl font-bold text-white flex items-center">
                            <i class="fas fa-crown text-yellow-400 mr-3"></i>
                            Plano Atual
                        </h3>
                        <div id="planBadge"></div>
                    </div>

                    <div class="space-y-3">
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400">Clínica</span>
                            <span id="planClinicName" class="text-white font-semibold">-</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400">Status</span>
                            <span id="planStatus" class="text-green-400 font-semibold">-</span>
                        </div>
                        <div class="flex items-center justify-between">
                            <span class="text-gray-400">Owner</span>
                            <span id="planOwner" class="text-white font-semibold">-</span>
                        </div>
                        <div id="planTrial" class="hidden bg-yellow-500/10 border border-yellow-500/30 text-yellow-300 px-4 py-3 rounded-lg text-sm">
                            <i class="fas fa-clock mr-2"></i>
                            <span id="planTrialText"></span>
                        </div>
                    </div>

                    <div class="mt-6 flex gap-3">
                        <button 
                            onclick="window.location.href='/settings.html?tab=plan'"
                            class="flex-1 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-bold py-3 rounded-lg transition"
                        >
                            <i class="fas fa-rocket mr-2"></i>Upgrade de Plano
                        </button>
                        <button 
                            class="bg-white/10 hover:bg-white/20 text-white font-semibold py-3 px-4 rounded-lg transition"
                        >
                            <i class="fas fa-file-invoice-dollar"></i>
                        </button>
                    </div>
                </div>

                <!-- Limites e Uso -->
                <div class="glass-card rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white flex items-center mb-4">
                        <i class="fas fa-chart-bar text-cyan-400 mr-3"></i>
                        Limites e Uso
                    </h3>

                    <!-- Usuários -->
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-gray-300 font-semibold">Usuários</span>
                            <span class="text-white font-bold">
                                <span id="planUsersUsed">0</span>/<span id="planUsersMax">0</span>
                            </span>
                        </div>
                        <div class="w-full bg-white/10 rounded-full h-3 overflow-hidden">
                            <div id="planUsersProgress" class="h-3 bg-gradient-to-r from-cyan-500 to-blue-600" style="width: 0%"></div>
                        </div>
                        <p class="text-xs text-gray-400 mt-1">Uso atual: <span id="planUsersPercent">0</span>%</p>
                    </div>

                    <!-- Pacientes/Leads -->
                    <div class="mb-2">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-gray-300 font-semibold">Pacientes/Leads</span>
                            <span class="text-white font-bold">
                                <span id="planPatientsUsed">0</span>/<span id="planPatientsMax">0</span>
                            </span>
                        </div>
                        <div class="w-full bg-white/10 rounded-full h-3 overflow-hidden">
                            <div id="planPatientsProgress" class="h-3 bg-gradient-to-r from-green-500 to-emerald-600" style="width: 0%"></div>
                        </div>
                        <p class="text-xs text-gray-400 mt-1">Uso atual: <span id="planPatientsPercent">0</span>%</p>
                    </div>
                </div>
            </div>

            <!-- Planos Disponíveis -->
            <div class="glass-card rounded-xl p-6 mt-6">
                <h3 class="text-xl font-bold text-white flex items-center mb-4">
                    <i class="fas fa-layer-group text-purple-400 mr-3"></i>
                    Planos Disponíveis
                </h3>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="border border-white/10 rounded-xl p-4 bg-white/5">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="text-white font-semibold">Basic</h4>
                            <span class="text-xs bg-gray-600 text-white px-2 py-1 rounded-full">Entrada</span>
                        </div>
                        <ul class="text-sm text-gray-300 space-y-1 mb-4">
                            <li><i class="fas fa-users mr-2 text-cyan-400"></i>Até 5 usuários</li>
                            <li><i class="fas fa-user-injured mr-2 text-green-400"></i>Até 100 pacientes</li>
                            <li><i class="fas fa-chart-line mr-2 text-purple-400"></i>Relatórios básicos</li>
                        </ul>
                        <button onclick="requestUpgrade('basic')" class="w-full bg-white/10 hover:bg-white/20 text-white font-semibold py-2 rounded-lg transition">
                            Selecionar
                        </button>
                    </div>

                    <div class="border border-cyan-500/40 rounded-xl p-4 bg-cyan-500/10">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="text-white font-semibold">Professional</h4>
                            <span class="text-xs bg-cyan-500 text-white px-2 py-1 rounded-full">Popular</span>
                        </div>
                        <ul class="text-sm text-gray-200 space-y-1 mb-4">
                            <li><i class="fas fa-users mr-2 text-cyan-300"></i>Até 15 usuários</li>
                            <li><i class="fas fa-user-injured mr-2 text-green-300"></i>Até 500 pacientes</li>
                            <li><i class="fas fa-chart-bar mr-2 text-purple-300"></i>Relatórios avançados</li>
                        </ul>
                        <button onclick="requestUpgrade('professional')" class="w-full bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-semibold py-2 rounded-lg transition">
                            Solicitar Upgrade
                        </button>
                    </div>

                    <div class="border border-yellow-500/40 rounded-xl p-4 bg-yellow-500/10">
                        <div class="flex items-center justify-between mb-2">
                            <h4 class="text-white font-semibold">Enterprise</h4>
                            <span class="text-xs bg-yellow-500 text-black px-2 py-1 rounded-full">Elite</span>
                        </div>
                        <ul class="text-sm text-gray-200 space-y-1 mb-4">
                            <li><i class="fas fa-users mr-2 text-yellow-300"></i>Até 50 usuários</li>
                            <li><i class="fas fa-user-injured mr-2 text-green-300"></i>Até 1000 pacientes</li>
                            <li><i class="fas fa-crown mr-2 text-yellow-300"></i>Suporte prioritário</li>
                        </ul>
                        <button onclick="requestUpgrade('enterprise')" class="w-full bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-black font-semibold py-2 rounded-lg transition">
                            Solicitar Upgrade
                        </button>
                    </div>
                </div>
                <p class="text-xs text-gray-400 mt-4">* Após solicitar, o time comercial entra em contato para ativação.</p>
            </div>
        </div>

    </main>

    <!-- Modal: New User -->
    <div id="newUserModal" class="fixed inset-0 bg-black/70 flex items-center justify-center z-50 hidden">
        <div class="glass-card rounded-2xl max-w-md w-full mx-4 p-8 border-2 border-cyan-500/30">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-2xl font-bold text-white flex items-center">
                    <i class="fas fa-user-plus text-cyan-400 mr-3"></i>
                    Novo Usuário
                </h3>
                <button onclick="closeNewUserModal()" class="text-gray-400 hover:text-white transition">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>

            <form id="newUserForm" class="space-y-4" onsubmit="handleCreateUser(event)">
                
                <!-- Name -->
                <div>
                    <label class="block text-sm font-semibold text-cyan-300 mb-2">
                        <i class="fas fa-user mr-2"></i>Nome Completo
                    </label>
                    <input 
                        type="text" 
                        id="newUserName" 
                        class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                        placeholder="Ex: Maria Silva"
                        required
                    >
                </div>

                <!-- Email -->
                <div>
                    <label class="block text-sm font-semibold text-cyan-300 mb-2">
                        <i class="fas fa-envelope mr-2"></i>Email (Login)
                    </label>
                    <input 
                        type="email" 
                        id="newUserEmail" 
                        class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                        placeholder="maria@clinica.com"
                        required
                    >
                </div>

                <!-- Password -->
                <div>
                    <label class="block text-sm font-semibold text-cyan-300 mb-2">
                        <i class="fas fa-lock mr-2"></i>Senha
                    </label>
                    <input 
                        type="password" 
                        id="newUserPassword" 
                        class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                        placeholder="Mínimo 6 caracteres"
                        required
                        minlength="6"
                    >
                </div>

                <!-- Confirm Password -->
                <div>
                    <label class="block text-sm font-semibold text-cyan-300 mb-2">
                        <i class="fas fa-lock mr-2"></i>Confirmar Senha
                    </label>
                    <input 
                        type="password" 
                        id="newUserPasswordConfirm" 
                        class="w-full px-4 py-3 bg-white/10 border-2 border-white/20 rounded-lg focus:border-cyan-400 focus:outline-none transition text-white placeholder-gray-400"
                        placeholder="Repita a senha"
                        required
                        minlength="6"
                    >
                </div>

                <!-- Role Checkbox -->
                <div class="bg-white/5 border border-white/10 rounded-lg p-4">
                    <label class="flex items-center cursor-pointer">
                        <input 
                            type="checkbox" 
                            id="newUserIsAdmin" 
                            class="w-5 h-5 text-cyan-500 bg-white/10 border-white/20 rounded focus:ring-cyan-500 focus:ring-2"
                        >
                        <span class="ml-3 text-white font-semibold">
                            <i class="fas fa-crown text-purple-400 mr-2"></i>
                            Administrador da Clínica?
                        </span>
                    </label>
                    <p class="text-xs text-gray-400 mt-2 ml-8">
                        Administradores podem gerenciar a equipe e configurações.
                    </p>
                </div>

                <!-- Error Message -->
                <div id="formError" class="hidden bg-red-500/20 border border-red-500 text-red-300 px-4 py-3 rounded-lg text-sm">
                    <i class="fas fa-exclamation-circle mr-2"></i>
                    <span id="errorText"></span>
                </div>

                <!-- Actions -->
                <div class="flex space-x-3 pt-4">
                    <button 
                        type="button"
                        onclick="closeNewUserModal()"
                        class="flex-1 bg-white/10 hover:bg-white/20 text-white font-semibold py-3 rounded-lg transition"
                    >
                        Cancelar
                    </button>
                    <button 
                        type="submit"
                        id="submitBtn"
                        class="flex-1 bg-gradient-to-r from-cyan-500 to-blue-600 hover:from-cyan-600 hover:to-blue-700 text-white font-bold py-3 rounded-lg transition"
                    >
                        <i class="fas fa-check mr-2"></i>
                        Criar Usuário
                    </button>
                </div>

            </form>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notificationToast" class="fixed top-4 right-4 z-50 hidden">
        <div class="glass-card rounded-lg shadow-xl border-l-4 border-cyan-400 px-6 py-4 max-w-md">
            <div class="flex items-center">
                <i id="toastIcon" class="fas fa-check-circle text-cyan-400 text-2xl mr-3"></i>
                <p id="toastMessage" class="text-white font-medium">Mensagem</p>
            </div>
        </div>
    </div>

    </div> <!-- Close flex container -->

    <!-- Scripts -->
    <script src="./js/crm/settings.js"></script>
</body>
</html>
